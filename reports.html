<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title> - 转专转  MPG</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f2f2f2; direction: rtl; }
    .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
    h2 { text-align: center; margin-bottom: 20px; }
    .report { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .report:last-child { border-bottom: none; }
    .label { font-weight: bold; }
    a { color: #4caf50; text-decoration: none; }
    a:hover { text-decoration: underline; }
    img, video { max-width: 100%; max-height: 250px; margin-top: 5px; display: block; }
  </style>
</head>
<body>
  <div class="container">
    <h2>  砖砖专转</h2>
    <div id="reportsList"></div>

    <button onclick="clearReports()" style="margin-top: 20px; background:#f44336; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer;">
      拽 转  
    </button>

    <p style="margin-top:20px;">
      <a href="index.html">专 驻住 </a>
    </p>
  </div>

  <script>
    function calculatePoints(report) {
      let points = 0;
      if (report.survivedToEnd === "yes") points += 10;
      if (report.lastHider === "yes") points += 10;
      const caught = parseInt(report.caughtCount);
      if (!isNaN(caught)) points += caught;
      return points;
    }

    function displayProof(proofData) {
      if (!proofData) return ' 爪专驻 ';
      if (proofData.startsWith('data:image')) {
        return `<img src="${proofData}" alt="转" />`;
      } else if (proofData.startsWith('data:video')) {
        return `<video controls><source src="${proofData}" type="video/mp4">驻驻  转 .</video>`;
      } else {
        return '住   转';
      }
    }

    function renderReports() {
      const reportsList = document.getElementById('reportsList');
      const reports = JSON.parse(localStorage.getItem('reports') || '[]');

      if (reports.length === 0) {
        reportsList.innerHTML = '<p>  砖专.</p>';
        return;
      }

      reportsList.innerHTML = '';

      reports.forEach((r, i) => {
        const points = calculatePoints(r);

        const div = document.createElement('div');
        div.classList.add('report');

        div.innerHTML = `
          <p><span class="label"> #${i + 1} - ${r.date}</span></p>
          <p><span class="label">砖 砖拽 砖拽:</span> ${r.playerName}</p>
          <p><span class="label">砖 砖拽 住拽专:</span> ${r.discordName}</p>
          <p><span class="label">专:</span> ${r.roundNumber}</p>
          <p><span class="label">转驻拽:</span> ${r.role}</p>
          <p><span class="label"> 砖专 注 住祝 专:</span> ${r.survivedToEnd}</p>
          <p><span class="label">   10 专:</span> ${r.top10}</p>
          <p><span class="label">  专 砖转专:</span> ${r.lastHider}</p>
          <p><span class="label"> 砖拽 转驻住转:</span> ${r.caughtCount}</p>
          <p><span class="label">转驻住  专 砖拽 注转:</span> ${r.mostCatches}</p>
          <p><span class="label"> 拽 住驻:</span> ${points} 拽转</p>
          <p><span class="label">:</span><br>${displayProof(r.proofData)}</p>
          <p><span class="label">注专转:</span> ${r.notes}</p>
        `;

        reportsList.appendChild(div);
      });
    }

    function clearReports() {
      if(confirm('转  砖专爪 拽 转  ?')) {
        localStorage.removeItem('reports');
        renderReports();
      }
    }

    renderReports();
  </script>
</body>
</html>